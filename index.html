<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Employee Attrition Predictor</title>

<style>
:root {
  --purple: #7c3aed;
  --blue: #2563eb;
  --bg-dark: #0f172a;
  --card: #111827;
  --input: #020617;
  --border: #334155;
  --text: #e5e7eb;
  --muted: #94a3b8;
  --success: #22c55e;
  --danger: #ef4444;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  font-family: "Segoe UI", sans-serif;
  background: linear-gradient(135deg, var(--purple), var(--blue));
}

.container {
  max-width: 1250px;
  margin: auto;
  padding: 40px 20px;
}

.header {
  position: relative;
  text-align: center;
  margin-bottom: 25px;
}

.header h1 {
  color: white;
  font-size: 40px;
  margin: 0;
}

.header p {
  color: #dbeafe;
  margin-top: 6px;
}

.demo-btn {
  position: absolute;
  right: 0;
  top: 0;
  background: rgba(255,255,255,0.15);
  color: #e0e7ff;
  border: 1px solid rgba(255,255,255,0.3);
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 13px;
  cursor: pointer;
}

.demo-btn:hover {
  background: rgba(255,255,255,0.25);
}

.card {
  background: var(--card);
  border-radius: 20px;
  padding: 30px;
  box-shadow: 0 30px 80px rgba(0,0,0,0.6);
}

form {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 18px;
}

.form-group {
  display: flex;
  flex-direction: column;
}

label {
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 6px;
  color: var(--text);
}

input, select {
  background: var(--input);
  border: 1px solid var(--border);
  color: white;
  padding: 10px 12px;
  border-radius: 10px;
  font-size: 14px;
}

input::placeholder {
  color: var(--muted);
}

input:focus, select:focus {
  outline: none;
  border-color: var(--blue);
  box-shadow: 0 0 0 3px rgba(37,99,235,0.3);
}

.actions {
  grid-column: 1 / -1;
  margin-top: 30px;
}

.predict-btn {
  width: 100%;
  padding: 18px;
  border: none;
  border-radius: 16px;
  background: linear-gradient(135deg, var(--purple), var(--blue));
  color: white;
  font-size: 20px;
  font-weight: 700;
  cursor: pointer;
}

.predict-btn:hover {
  opacity: 0.95;
}

.progress-container {
  width: 100%;
  height: 8px;
  background: #1e293b;
  border-radius: 10px;
  margin-top: 20px;
  overflow: hidden;
  display: none;
}

.progress-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--purple), var(--blue));
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% { width: 0%; }
  50% { width: 70%; }
  100% { width: 100%; }
}

.result {
  margin-top: 30px;
  text-align: center;
  font-size: 26px;
  font-weight: bold;
}

.result.stay { color: var(--success); }
.result.leave { color: var(--danger); }

.footer {
  margin-top: 30px;
  text-align: center;
  font-size: 13px;
  color: #c7d2fe;
}
</style>
</head>

<body>
<div class="container">

  <div class="header">
    <h1>AI Employee Attrition Predictor</h1>
    <p>Machine Learningâ€“driven HR insights</p>
    <button class="demo-btn" onclick="loadDemo()">Load Demo</button>
  </div>

  <div class="card">
    <form id="employeeForm"></form>

    <div class="actions">
      <button class="predict-btn" onclick="submitForm()">ðŸ”® Predict Attrition</button>
      <div class="progress-container" id="progressBox">
        <div class="progress-bar"></div>
      </div>
    </div>

    <div id="result" class="result"></div>
  </div>

  <div class="footer">
    FastAPI Â· Random Forest Â· Docker Â· AI UI
  </div>

</div>

<script>
const labelMap = {
  Age: "Employee Age",
  DailyRate: "Daily Salary Rate",
  DistanceFromHome: "Distance From Home (km)",
  Education: "Education Level (1â€“5)",
  EnvironmentSatisfaction: "Work Environment Satisfaction",
  HourlyRate: "Hourly Pay Rate",
  JobInvolvement: "Job Involvement Level",
  JobLevel: "Job Level",
  JobSatisfaction: "Job Satisfaction Level",
  MonthlyIncome: "Monthly Salary",
  MonthlyRate: "Monthly Rate",
  NumCompaniesWorked: "Companies Worked Previously",
  PercentSalaryHike: "Last Salary Hike (%)",
  PerformanceRating: "Performance Rating",
  RelationshipSatisfaction: "Relationship Satisfaction",
  StockOptionLevel: "Stock Option Level",
  TotalWorkingYears: "Total Work Experience (Years)",
  TrainingTimesLastYear: "Trainings Last Year",
  WorkLifeBalance: "Workâ€“Life Balance",
  YearsAtCompany: "Years at Current Company",
  YearsInCurrentRole: "Years in Current Role",
  YearsSinceLastPromotion: "Years Since Last Promotion",
  YearsWithCurrManager: "Years with Current Manager",
  BusinessTravel: "Business Travel Frequency",
  Department: "Department",
  EducationField: "Education Field",
  Gender: "Gender",
  JobRole: "Job Role",
  MaritalStatus: "Marital Status",
  OverTime: "Overtime Work"
};

const categoricalData = {
  BusinessTravel: ["Non-Travel","Travel_Frequently","Travel_Rarely"],
  Department: ["Human Resources","Research & Development","Sales"],
  EducationField: ["Human Resources","Life Sciences","Marketing","Medical","Other","Technical Degree"],
  Gender: ["Female","Male"],
  JobRole: ["Healthcare Representative","Human Resources","Laboratory Technician","Manager",
            "Manufacturing Director","Research Director","Research Scientist",
            "Sales Executive","Sales Representative"],
  MaritalStatus: ["Divorced","Married","Single"],
  OverTime: ["No","Yes"]
};

const numericFields = [
  "Age","DailyRate","DistanceFromHome","Education","EnvironmentSatisfaction",
  "HourlyRate","JobInvolvement","JobLevel","JobSatisfaction","MonthlyIncome",
  "MonthlyRate","NumCompaniesWorked","PercentSalaryHike","PerformanceRating",
  "RelationshipSatisfaction","StockOptionLevel","TotalWorkingYears",
  "TrainingTimesLastYear","WorkLifeBalance","YearsAtCompany",
  "YearsInCurrentRole","YearsSinceLastPromotion","YearsWithCurrManager"
];

const demoData = {
  Age:41,DailyRate:1102,DistanceFromHome:1,Education:2,EnvironmentSatisfaction:2,
  HourlyRate:94,JobInvolvement:3,JobLevel:2,JobSatisfaction:4,MonthlyIncome:5993,
  MonthlyRate:19479,NumCompaniesWorked:8,PercentSalaryHike:11,PerformanceRating:3,
  RelationshipSatisfaction:1,StockOptionLevel:0,TotalWorkingYears:8,
  TrainingTimesLastYear:0,WorkLifeBalance:1,YearsAtCompany:6,
  YearsInCurrentRole:4,YearsSinceLastPromotion:0,YearsWithCurrManager:5,
  BusinessTravel:"Travel_Rarely",Department:"Sales",EducationField:"Life Sciences",
  Gender:"Female",JobRole:"Sales Executive",MaritalStatus:"Single",OverTime:"Yes"
};

const form = document.getElementById("employeeForm");

function addField(key, type, options) {
  const g = document.createElement("div");
  g.className = "form-group";

  const l = document.createElement("label");
  l.textContent = labelMap[key] || key;

  let i;
  if (type === "select") {
    i = document.createElement("select");
    const e = document.createElement("option");
    e.value = "";
    e.textContent = "-- Select --";
    i.appendChild(e);
    options.forEach(v => {
      const o = document.createElement("option");
      o.value = v;
      o.textContent = v;
      i.appendChild(o);
    });
  } else {
    i = document.createElement("input");
    i.type = "number";
    i.placeholder = "Enter value";
  }

  i.name = key;
  g.appendChild(l);
  g.appendChild(i);
  form.appendChild(g);
}

Object.entries(categoricalData).forEach(([k,v]) => addField(k,"select",v));
numericFields.forEach(f => addField(f,"number"));

function loadDemo() {
  [...form.elements].forEach(el => {
    if (demoData[el.name] !== undefined) el.value = demoData[el.name];
  });
}

function submitForm() {
  const payload = {};
  [...form.elements].forEach(el => {
    if (el.name && el.value !== "") payload[el.name] = el.value;
  });
  payload.Over18 = "Y";

  document.getElementById("progressBox").style.display = "block";
  document.getElementById("result").textContent = "";

  fetch("/predict", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify(payload)
  })
  .then(r => r.json())
  .then(r => {
    document.getElementById("progressBox").style.display = "none";
    const res = document.getElementById("result");
    res.className = r.prediction === "Leave" ? "result leave" : "result stay";
    res.textContent = r.prediction === "Leave"
      ? "ðŸš¨ Employee is likely to LEAVE"
      : "âœ… Employee is likely to STAY";
  });
}
</script>

</body>
</html>
